## Unix IO

在Unix体系下，所有的IO设备，例如网络、磁盘和终端都被模型化为文件。相应的所有的输入和输出都被当做对文件的读和写来操作。因此所有的输入和输出都有一套同一且一致的执行方式：

- 打开文件：应用程序通过内核打开响应的文件，内核会返回一个小的非负整数，叫做描述符。应用程序后续所有对此文件的操作都可以用这个描述符标识。内核负责记住描述符对应的文件的所有信息。
- Linux shell创建的每个进程开始时都会有三个打开的文件：标准输入stdin（描述符为0）、标准输出stdout（描述符为1）和标准错误（描述符为2）。
- 当前文件位置：对于每一个打开的文件，内核都会记录该文件的当前文件位置k，初始时该值为0。
- 读写文件：读文件就是从文件复制n（n>0）个字节到内存。当文件当前位置k大于等于文件大小时再执行读操作会触发一个end-of-file（EOF）条件，应用程序可以检测到这个条件。文件末尾并没有明确的EOF符号。
- 关闭文件：对文件完成操作后可以通知内核关闭该文件。内核收到通知后会释放记录该文件信息的数据结构，并将这个文件描述符恢复到可用的描述符池中。还有就是一个进程无论因为何种原因终止时，内核都会关闭所有打开的文件并释放它们的内存资源。