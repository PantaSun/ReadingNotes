## 优化程序性能

要想编写高性能的程序要做到以下三点：

- 1. 要选择适当的数据结构和算法
  2. 编写出编译器能够有效优化以转换成高效可执行代码的源代码
  3. 针对处理运算量大的计算，可以将一个任务划分成多个子任务在某种组合下并行计算。



### 妨碍优化的因素

- 主要的是，如果编译器不能确定两个指针是否指向同一位置，就必须假设什么情况都可能，这就限制了可能的 优化策略。
- 第二个妨碍优化的因素是函数调用。编译器不会试图判断被调用的函数是否没有副作用，而是会假设最糟糕的情况，并保持原有的函数的调用不变。

### 通用技巧

> 即使是常数项系数的操作，同样可能影响性能。性能的优化是一个多层级的过程：算法、数据表示、过程和循环，都是需要考虑的层次。于是，这就要求我们需要对系统有一定的了解，例如：
>
> - 程序是如何编译和执行的
> - 现代处理器和内存是如何工作的
> - 如何衡量程序的性能以及找出瓶颈
> - 如何保持代码模块化的前提下，提高程序性能
>
> 最根源的优化是对编译器的优化，比方说再寄存器分配、代码排序和选择、死代码消除、效率提升等方面，都可以由编译器做一定的辅助工作。
>
> 但是因为这毕竟是一个自动的过程，而代码本身可以非常多样，在不能改变程序行为的前提下，很多时候编译器的优化策略是趋于保守的。并且大部分用来优化的信息来自于过程和静态信息，很难充分进行动态优化。例如上述的妨碍因素就是编译器保守的体现。