## 协议

协议就是计算机与计算机之间通过网络实现通信系统时事先达成的一种“约定”。

两台计算机之间必须能够支持相同的协议，并遵循相同协议进行处理，这样才能实现相互通信。

## 协议分层与OSI参考模型

分层可以使比较复杂的网络简单化。

在OSI参考模型中，一共分为7层。每个分层都接收下一层所提供的特定的服务，并为自己的上一层提供特定的服务。上下层之间交互所遵循的约定叫做接口，同一层之间的交互所遵循的约定叫做协议。

分层的优点：将每个分层独立使用，即使某个分层发生变化，也不会波及整个系统；分层后系统具有较强的扩展性和灵活性；分层能够细分通信功能，更易于实现每个分层的协议，并界定各个分层的具体责任和义务。

### OSI参考模型

从上到下：

- 应用层：为应用程序提供服务并规定应用程序中通信相关的细节。
- 表示层：
  - 将应用处理的信息转换为适合网络传输的格式，或者将来自下一层的数据转换为上一层能够处理的数据格式。即主要就是负责数据格式转换。
  - 表示层，顾名思义，表示数据的一层，所以该层更关注数据的具体表现形式。因为相同的数据在不同的计算机之间的表现形式是不同的，在计算机中一切数据归根到底就是一串0、1序列。而0、1序列在不同计算机中的存贮方式是不同的，有大端法和小端法两种。表示层就可以解决这个问题，不管数据在计算机中的格式如何，都将它们转换成“网络通用的标准数据格式”，这样异构计算机之间也能保持数据一致。
  - 总结起来就是，表示层是进行“统一的网络数据格式”与“某一台计算机或某一特定应用的数据格式”之间相互转换的分层。
- 会话层：负责建立和断开通信连接，以及数据的分割等数据相关的管理。决定采用何种连接方式（何时建立连接、何时发送数据）是会话层的主要责任。不具有实际传输数据的动能。
- 传输层：起着可靠传输的作用。只在通信双方节点上进行处理，而无需在路由器上处理。（后面这句没看懂，好像是确保数据被可靠的传送到目标地址，这个目标地址就是目标节点吧？）
- 网络层：将数据传输到目标地址。这一层主要负责地址管理（寻址）与路由选择
- 数据链路层：负责物理层面上的互连的、节点之间的通信传输。互连设备之间传送和识别数据帧。
- 物理层：负责0、1比特流与高低、光的闪灭之间的转换。

在层之间传输的数据都有一个对应每一层的头部，剩下部分就是数据的内容。处理上一层传来的数据时，这个数据就是当前层数据的内容，当前层还要在该数据内容上加上当前层协议所必须的头部信息，组合成当前层数据（内容+头部）。处理下一层传来的数据时，要将数据的内容和头部分离，再将数据的内容转发给上一层。

从上到下，每一层都给数据加一个属于当前层的头；从下到上，每一层都从数据中将属于当前层的头剥离。