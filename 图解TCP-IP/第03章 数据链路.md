## 数据链路的作用

数据链路指OSI参考模型中的数据链路层，有时也指以太网、无线局域网等通信手段。

数据链路层的协议定义了通过通信媒介互连的设备之间传输的规范 。

#### 数据链路的段

数据链路指的是一个被分割的网络，例如使用中继器将两条网线相连组成一个网络。根据使用者的不同，其含义也不同：

- 从网络层的概念看，这两个网线加一个中继器就是一个网络（逻辑上），即，从网络层的立场出发，这两条网线组成要给段。
- 从物理层的概念看，两条网线分别是两个物体（物理上），即，从物理层的角度出发，每一条网线就是要给段。

### MAC地址

Mac地址用于识别数据链路中互连的节点。Mac地址长48比特。

### 共享介质型网络

共享介质型网络就是指多个设备共享一个通信介质的一种网络。在这种网络中，设备之间使用同一个载波信道进行发送和接收。

这种网络有两种介质访问控制方式：

- 争用方式：指争夺获取数据传输的权力，也叫CSMA，说白了就是先到先得。若多个设备同时发送帧，就会产生冲突，从而导致网路拥堵与性能下降。在此基础上有一种改进方式叫CSMA/CD方式，这种方式工作原理为：若信载波信道上没有数据流动，则任何站（设备）都可发送数据。检查是否发生冲突，一旦发生重推，放弃发送数据，同时立即释放载波信道。放弃发送以后，随机延时一段时间，再重新争用介质，重新发送帧。
- 令牌方式：只有获得令牌的站才可以发送数据。每个站都通过平等循环获得令牌，这样就不会发生冲突。但是当信道上无数据流动时，一个站想要发送数据也要等到它有令牌的时候才可以发，因此在不拥堵的情况下数据链路的利用率达不到100%。针对这个缺点也衍生了很多令牌传递技术。

### 非共享介质网络

即不共享介质，网络中的每个站都直接连到交换机，由交换机负责转发数据帧。因此发送端和接收端不共享介质，可以采用全双工通信方式。

### 以太网帧格式

以太网帧前端有一个前导码，由0、1交替组合而成，表示一个以太网帧的开始，这也是对端网卡能够确保与其同步的标志。前导码的末尾有个叫SFD（Start Frame Delimiter）的域，值为“11”。在这个域之后的部分就是以太网帧的本体。前导码与SFD合起来共占8字节。

以太网帧本体格式：

- 共占16字节
- 6个字节的目标MAC地址
- 6个字节的源MAC地址
- 2个字节的上层协议类型
- 以太网帧后面紧跟的就是数据
- 帧尾部有一个叫做FCS（Frame Check Sequence，帧检验序列）的四个字节

FCS：该值是整个帧除以生成多项式的余数。接收端也以相同的方式计算，如果得到的值与FCS的值相同就认为帧没有错。



