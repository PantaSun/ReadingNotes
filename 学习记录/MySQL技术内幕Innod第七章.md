事务是数据库区别于文件系统的最重要的特性之一。

## 概述

- 原子性：指整个数据库事务是不可分割的工作单位。
- 一致性：指事务将数据库从一种状态转换为另一种一致状态。在事务开始前和结束后，数据库的约束没有被破坏。
- 隔离性：事物的隔离性要求每个读写事务的对象对其他事务的操作对象能相互分离，即该事务提交前对其他事务都不可见。
- 持久性：事务一旦提交，其结果就是永久性的。即使发生宕机等故障，数据库也能将数据恢复。



# 事务的实现

事物的隔离性是由锁来实现的。原子性、一致性以及持久性是由数据库的redo log 和undo log 来完成的。其中：

- redo log称为重做日志：用来保证事务的原子性和持久性
- undo log用来保证事务的一致性。

redo和 undo不是互逆过程，它俩都可以视为一种恢复操作：

- redo恢复提交事务修改的页操作，通常是物理日志，记录的是页的物理修改操作。
- undo回滚行记录到某个特定的版本，是逻辑日志，根据每行记录进行记录。