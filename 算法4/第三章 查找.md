### 符号表

一种存储键值对的数据结构，支持两个操作：插入和查找。



###顺序查找（基于无序链表）

这种符号表的插入和查找都需要遍历一遍链表，因此未命中的查找和插入操作都需要N次比较。命中的查找在最坏情况下需要N次比较。特别地，向一个空表中插入N个不同的键需要大约$N^2/2$次比较。



### 基于有序数组的二分查找

使用一对平数组，一个存储键，一个存储值。

在N个键的有序数组中进行二分查找最多需要lgN+1次比较（无论成功与否）。

虽然这种方式在查找上时间复杂度降低了，但是插入操作反而更加复杂了：向大小为N的有序数组中插入一个新的元素在最坏情况下需要访问大约2N次数组，因此向一个空有序数组插入N个元素在最坏情况下需要访问$N^2$次数组。

----



## 二叉查找树

二叉查找树是一棵二叉树，其中每个结点都含有一个键用以排序，且每个结点的键都大于其左子树中任意结点的键而小于其右子树中任意结点的键。

### 基本实现

通过嵌套定义一个结构体（类）来表示二叉树上的一个结点。

#### 查找

在二叉查找树中查找一个键的方法是使用递归算法：

- 如果树为空，则返回null，表示未找到
- 若根节点的键为要查找的键，则查找命中
- 若根节点不是要查找的键，则递归的在其子树中继续查找：
  - 若目标键小于根结点的键，则去根的左子树中查找
  - 若目标键大于根结点的键，则去根的右子树中查找

#### 分析

二叉查找树的运行时间取决于树的形状，而树的形状又取决于键插入的先后顺序。

最好的情况下，一棵含有N个结点的树是平衡的，叶子结点与根节点的距离（树的高度）大约为lgN；

最坏的情况下，一棵含有N个结点的树高度为N，级搜索路径上有N个结点。

#### 时间复杂度

在由N个随机构造的二叉查找树中，查找命中平均所需的比较次数为~2lnN（约1.39lgN），所以查找一次是O(lgN)级别的；插入一次的时间复杂度也是O(lgN)级别的。

#### 删除操作

二叉查找树中最难实现的就是删除结点方法。

删除x结点的具体步骤（这里使用被删除结点的后继结点来顶替该被删除结点）：

- 将指向即将被删除的结点的链接保存为t
- 将x指向它的后继结点min(t.right)
- 将x的右链接指向deleteMin(t.right)
- 将x的左链接设为t.left

#### 性能分析

在一棵查找二叉树中所有的操作在最坏情况下所需的时间都跟树的高度成正比。

----



## 平衡查找树



### 使用2-3查找树

2-3查找树或者是一棵空树，或者由以下结点构成：

- 2-结点：含有一个键和两条链接，左链接指向的2-3树中的键都小于该结点，右链接指向的2-3树中的键都大于该结点。
- 3-结点：含有两个键和三条链接，左链接指向的2-3树中的键都小于该结点，中链接指向的2-3树中的键在该结点两个键之间，右链接指向的2-3树中的键都大于该结点。

#### 完美平衡的2-3查找树

一棵完美的2-3查找树中所有的空链接到根结点的距离都应该是相同的。

### 一些操作

**查找**操作和原来的二叉查找树的操作类似，只不过在3-结点时多了一个比较区间

**插入**操作有一些不同，这也是使用2-3查找树的主要原因，即该树的插入操作可以维持树的平衡：

- 如果未命中的查找结束于一个2-结点，那么就将该结点替换为一个3-结点，将要插入的键保存其中即可。
- 如果未命中的查找结束于一个3-结点，事情就麻烦了：首先将该结点替换为一个4-结点，然后再根据实际情况来分解这个4-结点：
  - 若这个结点就是一个3-结点的根结点，那么可以将这个结点分解为3个2-结点，这种情况就是**向一棵只含有一个3-结点的树中插入新键**
  - 若这个结点是一个父节点为2-结点的3-结点，对于分解这个新得到的4-结点，不会为中键创建一个新节点，而是将该键移动至原结点的父节点中，这样父节点也就从2-结点变为3-结点。**向一个父节点为2-结点的3-结点中插入新键**
  - 若这个结点是一个父节点为3-结点的3-结点，先将该4-结点分解，然后将中键插入到父节点，父节点此时成为4-结点，再将这个4-父结点分解，即将这个中键再次向上移动。推广到一般情况下，可能会一直不断的向上分解临时4-结点，直到遇到一个2-结点为止或达到根结点。这是就要分解根结点
  - 分解根节点就是将4-结点分解为3个2-结点，使树的高度加一。



#### 时间复杂度

在一棵大小为N的2-3树中，查找和插入的时间复杂度是O(lgN)级别的。

2-3查找树在最坏的情况下也仍有较好的性能。但是由于要维护两种不同的结点，还有各种复制、分解等操作，在实现起来不但需要大量的代码，也可能因为这些操作而产生大量的额外开销，反而可能比标准二叉查找树更慢。



### 红黑二叉查找树

红黑树的基本思想就是用标准的二叉查找树和一些额外的信息（替换3-结点）来表示2-3查找树。

将树中的链接分为两种：

- 红链将两个2-结点连接起来构成一个3-结点，其实就是用由一条左斜的红色链接相连的两个2-结点替换原来的3-结点。
- 黑链就是2-3查找树中普通的链接

#### 红黑树的等价定义

红黑树是一棵满足下列条件的二叉查找树

- 红链接均为左链接
- 没有任何一个结点同时和两个红链相连
- 该树是完美黑色平衡，即任意空链到根结点的路径上的黑链接数量相同。

满足这样定义的红黑树和相应的2-3树是一一对应的。