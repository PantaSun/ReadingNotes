> 在链接过程中第一步是符号解析，所谓符号解析就是将符号的定义与符号的引用关联起来，那么什么是符号的定义与引用？

### 符号

符号包括函数和变量（局部非静态变量除外，这块不归链接器管，是在运行的时候在运行栈中分配空间）

下面几个例子说明定义的符号和引用的符号

```c
// main.c

// 符号定义 swap
void swap(...){ 
    ....
}

// 若符号定义 test
void test();

// 符号定义 x
int x = 10;

// 符号定义 xp，符号引用 x
int *xp = &x;

// 符号定义 main
int main(){
    // 局部变量，链接器不认，不会被外界引用，因此不是符号定义
    int y = 11;
    // 符号引用 swap
    swap(...);
}
```

上述代码说明，除了局部非静态变量，凡是带类型说明的都是定义，其他的都是引用。

编译器将**定义的符号**存放在符号表中，即在`.symtab`节中，每个表项包含符号名、长度和位置等信息

编译器将**引用的符号**存放在重定位节中（`.rel.text `  和 `.rel.data`）中

链接器的工作就是将每个符号的引用都与一个确定的符号定义相关联