### Cache（高速缓存）是什么样

- cache是一种小容量高速缓冲存储器，由SRAM组成。
- cache直接制作在CPU芯片内，速度几乎与CPU一样快
- 程序运行时，CPU使用的一部分数据/指令会预先成批拷贝在cache中，cache中的内容是主存中部分内容的影响
- 当CPU需要从内存读写数据或指令时，先检查cache，若有，就直接从cache中读取，而不用访问主存。

### Cache的操作过程

执行某条指令时：

- 开始时CPU给出主存地址，先把地址以及读写命令送到Cache，若Cache中有所需的数据（成为hit，命中），那就将该数据送给CPU，这条指令就执行完毕；
- 而当Cache中没有所需数据时（称为缺失或失靶miss），再把都写命令以及地址送往主存，从主存中取出该地址数据所属的块，然后在Cache中找到一个对应的空闲行，将数据块一份送到CPU，一份复制到Cache空闲行中（若没有空闲行就会替换Cache中某个部分），该条指令执行完毕。



### Cache映射

#### Cache映射功能

根据一定的映射规则，将主存块映射到Cache的槽（行）中。

#### 如何进行映射

- 直接映射：通过取模的方式，将每个主存块放到固定位置上
  - 容易实现，命中时间短
  - 无需考虑淘汰问题，因为每个块的位置已经固定，只需新的替换老的即可
  - 命中率低，空间利用率低，不够灵活，换进换出频繁
- 全相联：每个主存块映射到Cache的任一行，只要有空就可以放
  - 比较时间变成了，空间也增加了
  - 没有冲突缺失，因为只要有空闲Cache块，就不会冲突
- 组相联：每个主存块映射倒Cache固定组任一行
  - 组间模映射，组内全映射