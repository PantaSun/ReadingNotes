## Linux的文件权限与目录配置

### 使用者与群组

####文件拥有者

每个linux用户创建的文件的拥有者都是该用户自己。其他人不能修改和查看

####群组

可以在linux中为一个团队建立一个群组，将该团队的所有成员添加到群组中。属于这个团队的的文件所属群组就是该群组，群组中每个成员都可以查看和修改群组内的文件。不属于群组的用户就没有这些权限。

####其他人

不属于文件拥有者或文件所属群组成员的用户，就是其他人。

####root

root用户拥有超级权限，可以访问和修改Linux机器上的所有文件。

####Linux用户身份与群组记录的文件

- Linux系统默认情况下，所有系统上的账号（包括root）的相关信息

都记录在/etc/passwd这个文件内

- 个人的密码记录在/etc/shadow文件中
- 所有的组名都记录在/etc/group内

### Linux文件权限

#### 文件属性

当使用root用户登录后，输入ls -al命令，将列出当前目录下所有文件详细的权限与属性（包括隐藏文件）

文件属性分七部分：

- 第一栏代表文件的类型与权限：这一栏包含十个字符，例如 -rwxrwx---
  - 第一个字符表示文件类型：
    - 当为 d 时，表示目录
    - 当为 - 时，表示文件
    - 当为 l 时，表示超链接
    - 当为 b 时，表示为装置文件里面的可供存储的接口设备
    - 当为 c 时， 表示装置文件里面的串行端口设备，例如键盘、鼠标
  - 接下来每三个字符一组，且均为rwx的组合。r表示可读，w表示可写，x表示可执行，这三个字都排列顺序固定，若没有某种权限则用-代替，例如r--，就表示只是可读，不可写也不可执行。
  - 而这三组分表又表示：
    - 第一组为文件拥有者可具备的权限
    - 第二组为加入此群组账号的权限
    - 第三组为非本人且没有加入群组的其他人账号的权限
- 第二栏为有多少档名链接到此节点
- 第三栏为文件或目录的拥有者账号
- 第四栏为这个文件所属的群组
- 第五栏为这个问价的容量大小，默认单位是bytes
- 第六栏为文件的建档日期或最近的修改日期
- 第七栏为文件名

#### 修改文件权限

##### 改变群组，chgrp

- chgrp [-R] groupname dirname/filename：这里-R参数可以递归的变更，即递归的改变一个目录下的所有文件、目录的群组。该命令会将文件filename或目录dirname的群组改为groupname

##### 改变文件拥有者，chown 

- chown [-R] 账号名称 文件或目录
- chown [-R] 账号名称:群组 文件或目录，也就是说可以顺便把群组也修改了

##### 改变权限，chmod

文件的九个权限三个三个一组，其中rwx分别可用数字4、2、1表示。-用0表示

- chmod [-R] xyz 文件或目录，xyz分别是三组三个权限加起来的值，例如--- = 0+0+0=0，--x=0+0+1=1，-w-=0+2+0=2，-wx=0+2+1=3，r--=4+0+0=4，r-x=4+0+1=5，rw-=4+2+0=6，rwx = 4+2+1 = 7。
- 因此可以有chmod 777 文件或目录
- 用符号类型改变权限
  - chmod u=rwx,go=rx 文件名 ，这里u表示user，g表示group，o表示others，还有个a表示所有用户（即user、group和others）；‘=’表示设定，还有‘+’表示加入，‘-’表示除去。a+w表示所有用户都有写的权限

##### 文件权限的意义

- linux没有像windows下的后缀扩展名来判断文件是否是可执行文件，linux下是根据x权限来判断文件是否可执行。

##### 目录权限的意义

- r：具有读取目录结构列表的权限，可以使用ls命令将该目录的内容列表显示出来。


- w：可以在目录下建立和删除文件，也可以修改文件名以及搬移该目录内的文件、目录
- x：代表用户能都进入该目录成为工作目录

#### Linux文件种类与扩展名

##### 文件种类

- 正规文件
  - 纯ASCII：一般称为纯文本文档
  - 二进制文件：Linux下的可执行文件
  - 数据格式文件 data：程序运行过程中产生的某些特定格式的文件
- 目录：d
- 链接档：l
- 设备与装置文件：
  - 区块设备：b
  - 字符设备：c，一些串行端口的接口设备
- 资料接口文件：s
- 数据输送文件：p

##### 扩展名

一般Linux文件没什么扩展名，如果有也只是让你了解该文件可能的用途而已，真正的执行与否需要权限的规范才行。

可执行的权限和具有可执行的程序代码是两回事，例如我们可以让一个txt文件具有可执行权限x，但是它并不能执行。而如果给一个可执行的程序代码撤销其可执行权限x，它也执行不了。

### Linux目录配置

#### 目录配置的依据-FHS Filesystem Hierarchy Standard

FHS将文件定义为四种相互作用的形态：

|      |      可分享的       |     不可分享的     |
| :--: | :-------------: | :-----------: |
| 不变的  |   /usr（软件放置处）   |  /etc（配置文件）   |
| 不变的  |  /opt（第三方协力软件）  | /boot（开机与核心档） |
| 可变的  |    /var/mail    |   /var/run    |
| 可变的  | /var/spool/news |   /var/lock   |
|      |                 |               |

FHS针对目录树架构仅定义出三层目录底下应该放置什么数据

- / （root 根目录）：与开机系统有关
- /usr （unix software resource）：与软件安装/执行有关
- /var （variable）：与系统运作过程有关

